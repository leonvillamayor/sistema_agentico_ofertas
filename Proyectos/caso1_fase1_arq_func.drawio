<mxfile host="app.diagrams.net">
  <diagram name="SSMAS Yield Predictivo - Fase I - Arquitectura Funcional" id="caso1-fase1-functional">
    <mxGraphModel dx="1422" dy="821" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Título -->
        <mxCell id="title" value="SSMAS Yield Predictivo - Fase I: PoC y MVP - Arquitectura Funcional" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="20" width="669" height="30" as="geometry" />
        </mxCell>

        <!-- Development Account Container -->
        <mxCell id="dev-account" value="AWS Development Account (10.2.0.0/16)" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=14;fontStyle=1;fillColor=#E1F5FE;strokeColor=#0288D1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="70" width="1080" height="700" as="geometry" />
        </mxCell>

        <!-- Data Source -->
        <mxCell id="elastic-source" value="Datos SSMAS&#xa;(Elastic API)&#xa;&#xa;50M registros/día&#xa;7B+ impresiones/mes" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="120" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- Data Ingestion Layer -->
        <mxCell id="ingestion-layer" value="Capa de Ingesta de Datos" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=12;fontStyle=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="250" y="100" width="200" height="120" as="geometry" />
        </mxCell>

        <mxCell id="glue-crawler" value="AWS Glue&#xa;Crawler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="270" y="130" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="glue-etl" value="AWS Glue&#xa;ETL Job" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="130" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="data-validation" value="Validación&#xa;de Datos" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="270" y="180" width="170" height="30" as="geometry" />
        </mxCell>

        <!-- Data Storage Layer -->
        <mxCell id="storage-layer" value="Capa de Almacenamiento" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=12;fontStyle=1;fillColor=#E3F2FD;strokeColor=#1976D2;" vertex="1" parent="1">
          <mxGeometry x="500" y="100" width="280" height="220" as="geometry" />
        </mxCell>

        <mxCell id="s3-raw" value="S3: Datos Raw&#xa;/raw-data/" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="130" width="90" height="60" as="geometry" />
        </mxCell>

        <mxCell id="s3-processed" value="S3: Datos&#xa;Procesados&#xa;/processed/" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="130" width="90" height="60" as="geometry" />
        </mxCell>

        <mxCell id="s3-models" value="S3: Modelos&#xa;/models/" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="210" width="90" height="60" as="geometry" />
        </mxCell>

        <mxCell id="s3-results" value="S3: Resultados&#xa;/outputs/" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="210" width="90" height="60" as="geometry" />
        </mxCell>

        <mxCell id="glue-catalog" value="AWS Glue&#xa;Data Catalog" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="280" width="200" height="30" as="geometry" />
        </mxCell>

        <!-- Machine Learning Layer -->
        <mxCell id="ml-layer" value="Capa de Machine Learning" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=12;fontStyle=1;fillColor=#FFF8E1;strokeColor=#F57C00;" vertex="1" parent="1">
          <mxGeometry x="820" y="100" width="280" height="220" as="geometry" />
        </mxCell>

        <mxCell id="sagemaker-notebook" value="SageMaker&#xa;Notebook&#xa;(ml.t3.medium)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="840" y="130" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="sagemaker-training" value="SageMaker&#xa;Training Job&#xa;(ml.m5.xlarge)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="950" y="130" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="xgboost-model" value="XGBoost Model&#xa;CPM Predictor" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FF8F00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="840" y="200" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="sagemaker-endpoint" value="SageMaker&#xa;Endpoint&#xa;(ml.t2.medium)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="950" y="200" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="model-registry" value="Model Registry&#xa;& Versioning" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="840" y="270" width="200" height="30" as="geometry" />
        </mxCell>

        <!-- API and Integration Layer -->
        <mxCell id="api-layer" value="Capa de API e Integración" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=12;fontStyle=1;fillColor=#E8F5E8;strokeColor=#4CAF50;" vertex="1" parent="1">
          <mxGeometry x="500" y="360" width="280" height="150" as="geometry" />
        </mxCell>

        <mxCell id="api-gateway" value="API Gateway&#xa;/predict endpoint" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="390" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="lambda-integration" value="Lambda&#xa;Integration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="390" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="data-validation-api" value="Validación de Input&#xa;& Transformación" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="450" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Monitoring and Security Layer -->
        <mxCell id="monitoring-layer" value="Capa de Monitorización y Seguridad" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fontSize=12;fontStyle=1;fillColor=#FCE4EC;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="80" y="550" width="1000" height="180" as="geometry" />
        </mxCell>

        <mxCell id="cloudwatch" value="CloudWatch&#xa;Logs & Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="120" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="cloudwatch-dashboard" value="CloudWatch&#xa;Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="240" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="cloudwatch-alarms" value="CloudWatch&#xa;Alarms" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="iam-roles" value="IAM Roles&#xa;& Policies" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="kms-encryption" value="KMS&#xa;Encryption" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="vpc-security" value="VPC&#xa;Security Groups" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="590" width="100" height="40" as="geometry" />
        </mxCell>

        <mxCell id="custom-metrics" value="Métricas Personalizadas&#xa;RMSE, MAE, Latencia" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="120" y="650" width="220" height="40" as="geometry" />
        </mxCell>

        <mxCell id="logging-structure" value="Structured Logging&#xa;JSON Format" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="650" width="140" height="40" as="geometry" />
        </mxCell>

        <mxCell id="security-compliance" value="Security Compliance&#xa;GDPR, Data Protection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="650" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="cost-monitoring" value="Cost Monitoring&#xa;AWS Cost Explorer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="650" width="140" height="40" as="geometry" />
        </mxCell>

        <!-- Testing and Validation -->
        <mxCell id="testing-app" value="Aplicación de Testing&#xa;&#xa;• Load Testing&#xa;• Accuracy Validation&#xa;• Performance Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEEEEE;strokeColor=#616161;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="360" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- Data Flow Arrows -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2196F3;" edge="1" parent="1" source="elastic-source" target="ingestion-layer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="160" as="sourcePoint" />
            <mxPoint x="250" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#4CAF50;" edge="1" parent="1" source="ingestion-layer" target="storage-layer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="160" as="sourcePoint" />
            <mxPoint x="500" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#FF9800;" edge="1" parent="1" source="storage-layer" target="ml-layer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="780" y="210" as="sourcePoint" />
            <mxPoint x="820" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9C27B0;" edge="1" parent="1" source="sagemaker-endpoint" target="api-layer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="995" y="250" as="sourcePoint" />
            <mxPoint x="640" y="360" as="targetPoint" />
            <Array as="points">
              <mxPoint x="995" y="330" />
              <mxPoint x="640" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#E91E63;" edge="1" parent="1" source="api-layer" target="testing-app">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="435" as="sourcePoint" />
            <mxPoint x="410" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Feature Engineering Detail -->
        <mxCell id="feature-detail" value="Feature Engineering:&#xa;• Temporal (hora, día)&#xa;• Geográficas (country_tier)&#xa;• Dispositivo (performance_score)&#xa;• Agregaciones (CPM_7d)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=9;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="270" y="240" width="170" height="80" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="Leyenda:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="910" y="580" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-data" value="→ Flujo de Datos" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="600" width="100" height="15" as="geometry" />
        </mxCell>

        <mxCell id="legend-ml" value="→ ML Training" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="620" width="100" height="15" as="geometry" />
        </mxCell>

        <mxCell id="legend-api" value="→ API Calls" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="640" width="100" height="15" as="geometry" />
        </mxCell>

        <mxCell id="legend-test" value="→ Testing" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="660" width="100" height="15" as="geometry" />
        </mxCell>

        <!-- Metrics Box -->
        <mxCell id="metrics-box" value="Métricas Objetivo:&#xa;• RMSE &lt; 0.50 EUR&#xa;• Latencia P95 &lt; 50ms&#xa;• Throughput &gt; 1K/seg&#xa;• Uptime &gt; 99.5%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;fontSize=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="80" y="360" width="140" height="100" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>